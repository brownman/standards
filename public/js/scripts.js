// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var $select, colorArray, name, renderColors, timezone;
    $(document).on(function() {
      'click';

      'a[href]:not(.delete, .delete-confirm, .target, .title)';
      return function(event) {
        event.preventDefault();
        return window.location = $(this).attr("href");
      };
    });
    $(document).on(function() {
      'tap';

      'a[href]:not(.delete, .delete-confirm, .target, .title)';
      return function(event) {
        event.preventDefault();
        return window.location = $(this).attr("href");
      };
    });
    $('section [href^=#]').click(function(e) {
      return e.preventDefault();
    });
    $select = $('select#timezone');
    if ($select.data("zone") !== null) {
      $select.val($select.data("zone"));
    }
    $('input#name').keyup(function() {
      if ($(this).val().length > 1) {
        if (!$(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      } else {
        if ($(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      }
    });
    $('input#email').keyup(function() {
      var filter;
      filter = /(.+)@(.+){2,}\.(.+){2,}/;
      if (filter.test($(this).val())) {
        if (!$(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      } else {
        if ($(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      }
    });
    $('input#password').keyup(function() {
      if ($(this).val().length >= 8) {
        if (!$(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      } else {
        if ($(this).parents('.control-group').hasClass('success')) {
          return $(this).parents('.control-group').toggleClass("success");
        }
      }
    });
    if ($('div.btn-group[data-toggle-name=*]').length) {
      $('div.btn-group[data-toggle-name=*]').each(function() {
        var form, group, hidden, name;
        group = $(this);
        form = group.parents('form').eq(0);
        name = group.attr('data-toggle-name');
        hidden = $('input[name="' + name + '"]', form);
        return $('button', group).each(function() {
          var button;
          button = $(this);
          button.live('click', function() {
            return hidden.val($(this).val());
          });
          if (button.val() === hidden.val()) {
            return button.addClass('active');
          }
        });
      });
    }
    colorArray = function(numberOfRows, lightness) {
      var alpha, color, colors, hue, i, saturation, _i;
      colors = [];
      for (i = _i = 0; 0 <= numberOfRows ? _i <= numberOfRows : _i >= numberOfRows; i = 0 <= numberOfRows ? ++_i : --_i) {
        hue = i * 340 / (numberOfRows + 2);
        saturation = 0.8;
        alpha = 1.0;
        color = $.Color({
          hue: hue,
          saturation: saturation,
          lightness: lightness,
          alpha: alpha
        }).toHslaString();
        colors.push($.Color(color).toHexString());
      }
      return colors;
    };
    renderColors = function() {
      var barColors, bgColors, rows;
      rows = $('tbody').children();
      bgColors = colorArray(rows.size(), 0.8);
      barColors = colorArray(rows.size(), 0.6);
      return $(rows).each(function(row) {
        var $ministat;
        $ministat = $(this).children('td.title').children('.ministat');
        $ministat.css("background-color", bgColors[row]);
        return $ministat.children('.minibar').css("background-color", barColors[row]);
      });
    };
    renderColors();
    timezone = jstz.determine();
    name = timezone.name();
    return $('input#timezone').val(name);
  });

}).call(this);
