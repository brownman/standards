$(document).ready(function(){$(document).on("click","a[href]:not(.delete, .delete-confirm, .target, .title)",function(a){a.preventDefault();window.location=$(this).attr("href")});$("input#password").keyup(function(){$(this).val().length>=8?$(this).siblings("span.valid").length===0&&$(this).parent().append("<span class='help-inline valid'><i class='icon-ok'></i></span>"):$(this).siblings("span.valid").remove()});$("input#email").keyup(function(){var a=/^(([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+)?$/;a.test($(this).val())?$(this).siblings("span.valid").length===0&&$(this).parent().append("<span class='help-inline valid'><i class='icon-ok'></i></span>"):$(this).siblings("span.valid").remove()});$("#newtask").submit(function(){$.post("/",$(this).serialize(),function(a){$("tbody").append(a).children("tr").each(function(a,c){c=$(c).children("td.title").children("span.title");b(c);console.log(c)});$("#newtask").each(function(){this.reset()})},"text");return!1});$("#newtask .input").keypress(function(a){if(a.which===13){a.preventDefault();$("form#login").submit();return!1}});$(document).on("click","a.delete",function(a){$(this).siblings(".deleteModal").modal()});$(document).on("click","a.delete-confirm",function(a){var b=this;a.preventDefault();$.post(b.href,{_method:"delete"},function(a){window.location.pathname=="/edit"?$(b).closest("tr").remove():window.location.pathname="/edit"},"script")});$(document).on("click","a.target",function(a){var b=this;a.preventDefault();$.post(b.href,null,function(){$(b).children("img").toggleClass("complete")})});$("button.forgot").click(function(a){a.preventDefault()});var a=!1;$(document).on("keypress","span.title",function(b){if(b.which===13){b.preventDefault();if(a){$(this).trigger("editableSubmit");a=!1}}});$(document).on("click","a.rename",function(b){if(a){$(this).parent().siblings("td").children("span.title").trigger("editableSubmit");a=!1}else{$(this).parent().siblings("td").children("span.title").trigger("blur");a=!0}});var b=function(a){$(a).editable({editBy:"blur",submitBy:"editableSubmit",onSubmit:function(a){a.current!==a.previous&&$.post($(this).closest("span.title").attr("href"),{title:a.current},function(b){if(b!=="true"){$("body > .container").prepend(b).alert();$(this).text(a.previous)}})}})};b($("span.title"))});(function(a){a.fn.editable=function(b){var c={onEdit:null,onSubmit:null,onCancel:null,editClass:null,submit:null,cancel:null,type:"text",submitBy:"blur",editBy:"click",options:null};if(b=="disable")return this.unbind(this.data("editable.options").editBy,this.data("editable.options").toEditable);if(b=="enable")return this.bind(this.data("editable.options").editBy,this.data("editable.options").toEditable);if(b=="destroy")return this.unbind(this.data("editable.options").editBy,this.data("editable.options").toEditable).data("editable.previous",null).data("editable.current",null).data("editable.options",null);var b=a.extend(c,b);b.toEditable=function(){$this=a(this);$this.data("editable.current",$this.html());opts=$this.data("editable.options");a.editableFactory[opts.type].toEditable($this.empty(),opts);$this.data("editable.previous",$this.data("editable.current")).children().focus().addClass(opts.editClass);opts.submit?a("<button/>").appendTo($this).html(opts.submit).one("mouseup",function(){opts.toNonEditable(a(this).parent(),!0)}):$this.one(opts.submitBy,function(){opts.toNonEditable(a(this),!0)}).children().one(opts.submitBy,function(){opts.toNonEditable(a(this).parent(),!0)});opts.cancel&&a("<button/>").appendTo($this).html(opts.cancel).one("mouseup",function(){opts.toNonEditable(a(this).parent(),!1)});a.isFunction(opts.onEdit)&&opts.onEdit.apply($this,[{current:$this.data("editable.current"),previous:$this.data("editable.previous")}])};b.toNonEditable=function(b,c){opts=b.data("editable.options");b.one(opts.editBy,opts.toEditable).data("editable.current",c?a.editableFactory[opts.type].getValue(b,opts):b.data("editable.current")).html(opts.type=="password"?"*****":b.data("editable.current"));var d=null;a.isFunction(opts.onSubmit)&&c==1?d=opts.onSubmit:a.isFunction(opts.onCancel)&&c==0&&(d=opts.onCancel);d!=null&&d.apply(b,[{current:b.data("editable.current"),previous:b.data("editable.previous")}])};this.data("editable.options",b);return this.one(b.editBy,b.toEditable)};a.editableFactory={text:{toEditable:function(b,c){a("<input/>").appendTo(b).val(b.data("editable.current"))},getValue:function(a,b){return a.children().val()}},password:{toEditable:function(b,c){b.data("editable.current",b.data("editable.password"));b.data("editable.previous",b.data("editable.password"));a('<input type="password"/>').appendTo(b).val(b.data("editable.current"))},getValue:function(a,b){a.data("editable.password",a.children().val());return a.children().val()}},textarea:{toEditable:function(b,c){a("<textarea/>").appendTo(b).val(b.data("editable.current"))},getValue:function(a,b){return a.children().val()}},select:{toEditable:function(b,c){$select=a("<select/>").appendTo(b);a.each(c.options,function(b,c){a("<option/>").appendTo($select).html(c).attr("value",b)});$select.children().each(function(){var c=a(this);if(c.text()==b.data("editable.current"))return c.attr("selected","selected").text()})},getValue:function(b,c){var d=null;a("select",b).children().each(function(){if(a(this).attr("selected"))return d=a(this).text()});return d}}}})(jQuery);